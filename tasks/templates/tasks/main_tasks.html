{% load static %}

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="{% static 'tasks/style.css' %}">
    <title>Document</title>
</head>
<body>
    {% if tasks %}
        <div>
                <ul style="list-style-type: none;">
                   {% for task in tasks %}
                        <li>
                            <form method="post">
                                    {% csrf_token %}
                                        <div class="task-item">
                                            <div class="task-left">
                                                <label for="task{{ task.id }}">
                                                    <input type="radio" name="task_id" value="{{ task.id }}" id="task{{ task.id }}" onchange="this.form.submit()">
                                                    <b>{{ task.task_text }}</b>
                                                </label>
                                                {% if task.task_deadline %}
                                                <div class="task-deadline">Выполнить до: {{ task.task_deadline }}</div>
                                                {% endif %}
                                            </div>
                                             <div class="task-right">
                                                 <a href="{% url 'tasks:update_task' task.id %}">
                                                    <button type="button">Редактировать задачу</button>
                                                 </a>
                                                 <button type="submit" name="to_delete_task_id" value="{{ task.id }}" class="delete-btn">Удалить</button>
                                             </div>
                                        </div>

                            </form>
                        </li>
                    {% endfor %}
                </ul>

        </div>

    {% else %}
        <h2>Нету задач для выполнения!</h2>
    {% endif %}
    <form action="{% url 'tasks:create_task' %}">
        <button type="submit">Добавить новую задачу</button>
    </form>

    {% if completed_today %}
        <div>
            <h3>Завершено сегодня</h3>
            <ul style="list-style-type: none;">
                {% for task in completed_today %}
                    <li>
                        <form method="post">
                            {% csrf_token %}
                            <label for="completed_task{{ task.id }}">
                                <input type="radio" name="completed_task_id"  value="{{ task.id }}" id="completed_task{{ task.id }}" onchange="this.form.submit()">
                                {{ task.task_text }}
                            </label>
                        </form>
                    </li>
                {% endfor %}
            </ul>
        </div>
    {% endif %}
</body>
</html>